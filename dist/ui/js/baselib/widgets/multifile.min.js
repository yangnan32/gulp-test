zWidgets.multiFile=function(i){var e=!1;if(!e&&window.WebSocket){e=!1,$("#"+i.id).css("position","relative");var l=$("#"+i.id).width(),t=$("#"+i.id).height();$("#"+i.id).append("<div id='_f_form"+i.id+"' style='width:"+l+"px;height:"+t+"px; opacity:0; position: absolute;left: 0;top: 0;z-index: 888'><input type='file' style='width:"+l+"px;' name='_fi' id='_fi"+i.id+"'/></div>")}else e=!0;var d={id:i.id,clearBtnId:i.id+"ClearBtn",fileId:i.fileId,fileValueId:i.fileValueId,fileUlId:i.fileUlId,fileIdValue:i.fileIdValue||"",fileNameValue:i.fileNameValue||"",maxLength:i.maxLength||5,url:i.url,autoLoad:i.autoLoad,AjaxUpload:void 0,getFileId:function(){var i="";return $("#"+this.fileUlId).find("li").each(function(){""==i?i=$(this).attr("fileId"):i+=","+$(this).attr("fielId")}),i},getFileValue:function(){var i="";return $("#"+this.fileUlId).find("li").each(function(){""==i?i=$(this).attr("fileValue"):i+=","+$(this).attr("fileValue")}),i},initBtn:function(){$("#"+d.fileUlId+" li").length>=d.maxLength?$("#"+d.id).hide():$("#"+d.id).show()},fileAjaxUpload:function(){var i=$("#_fi"+d.id);return e&&(i=$("#"+d.id)),i.off("click"),i.on("click",function(){var i="";$(this).SyswareFileUpload({forceUseActiveX:e,fsdUrl:d.url,onCheckProgressChange:function(i){$("#mask_"+d.id).html("文件完整性校验中:"+i.progress+"%")},onGetMD5CodeProgressChange:function(i){$("#mask_"+d.id).html("文件哈希值计算中:"+i.progress+"%")},onSelectChange:function(e){i=e.fileName,$("#mask_"+d.id)[0]||zWidgets.mask.show({target:$("#body"),zindex:9999,loadText:"<div id='mask_"+d.id+"'>准备上传...</div>"})},onUploadFinish:function(e){if(!e.success)return zWidgets.mask.hide({id:"body"}),void alert("上传失败，上传过程中有数据丢失!");$("#"+d.fileUlId).append('<li fileId="'+e.fileId+'" fileValue="'+i+'" class="uiframe-multiFile-li"><div class="uiframe-multiFile-text">'+i+'</div><div class="uiframe-multiFile-delete multiFileDelete"></div></li>'),$("#"+d.fileId).val(d.getFileId()),$("#"+d.fileValueId).val(d.getFileValue()),d.initBtn(),""!=e.fileId&&$("#"+d.id).hasClass("error")&&$("#"+d.id).removeClass("error"),$("#"+d.id).trigger("fileSuccess"),$("#"+d.id).focus(),zWidgets.mask.hide({id:"body"})},onUploadProgressChange:function(i){$("#mask_"+d.id).html("正在上传中:"+i.progress+"%")}})}),this.AjaxUpload}};if(d.autoLoad&&"false"!=d.autoLoad&&d.fileAjaxUpload(),""!=d.fileIdValue&&""!=d.fileNameValue)for(var a=d.fileIdValue.split(","),f=d.fileNameValue.split(","),n=0,o=a.length;n<o;n+=1)$("#"+d.fileUlId).append('<li fileId="'+a[n]+'" fileValue="'+f[n]+'" class="uiframe-multiFile-li"><div class="uiframe-multiFile-text">'+f[n]+'</div><div class="uiframe-multiFile-delete multiFileDelete"></div></li>');$("#"+d.clearBtnId).on("click",function(){$("#"+d.fileId).val(""),$("#"+d.fileValueId).val(""),$("#"+d.fileUlId).empty(),d.initBtn()}),$("#"+d.id).on("disable",function(){$("#"+d.id).addClass("uiframe-emptyTextColor"),$("#_fi"+d.id).attr("disabled")}),$("#"+d.id).on("enable",function(){$("#"+d.id).removeClass("uiframe-emptyTextColor"),$("#_fi"+d.id).removeAttr("disabled"),d.fileAjaxUpload()}),$(document).on("click","#"+d.fileUlId+" .multiFileDelete",function(){$(this).parent("li").remove(),$("#"+d.fileId).val(d.getFileId()),$("#"+d.fileValueId).val(d.getFileValue()),d.initBtn()}),$("#"+d.id).parent("div.widget-multiFile").attr("data-parserFlag",!0)};